<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bienvenido! Busca un transporte para tu hogar - Mapa con Buscador</title>
  <!-- Estilos de Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <!-- Estilos de Leaflet Control Geocoder -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div id="logo">Aeropuerto Iquique Tarapacá</div>
    <nav>
      <button class="header-button">Contacto</button>
      <button class="header-button">Sobre Nosotros</button>
      <button class="header-button">Ayuda</button>
      <button class="header-button">Iniciar Sesión</button>
    </nav>
  </header>

  <main>
    <h1>Bienvenido! Busca un transporte para tu hogar</h1>

    <!-- Formulario de búsqueda -->
    <div id="search-container">
      <input type="text" id="search-input" placeholder="Buscar calle en Iquique..." />
      <button id="search-button">Buscar</button>
    </div>

    <!-- Contenedor del mapa -->
    <div id="map" style="height: 500px; width: 100%;"></div>
  </main>

  <!-- Script de Leaflet -->
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <!-- Script de Leaflet Control Geocoder -->
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
  
  <script>
    // Inicializar el mapa y establecer la ubicación
    const map = L.map('map').setView([-20.2307, -70.1357], 13); // Coordenadas de Iquique

    // Agregar el mapa de OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Agregar un marcador en el mapa
    L.marker([-20.2307, -70.1357]).addTo(map)
      .bindPopup('Aeropuerto Iquique Tarapacá')
      .openPopup();

    // Función de búsqueda con Leaflet Control Geocoder
    const geocoder = L.Control.Geocoder.nominatim();

    // Manejo de búsqueda cuando se hace clic en el botón
    document.getElementById('search-button').addEventListener('click', function() {
      const query = document.getElementById('search-input').value;
      geocoder.geocode(query, function(results) {
        if (results && results.length > 0) {
          const result = results[0];
          map.setView(result.center, 15); // Centrar el mapa en el resultado
          L.marker(result.center).addTo(map) // Añadir un marcador en el resultado
            .bindPopup(result.name)
            .openPopup();
        } else {
          alert('No se encontró la ubicación especificada.');
        }
      });
    });
  </script>
</body>
</html>
